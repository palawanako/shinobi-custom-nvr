<%
    var details = JSON.parse($user.details)
%>
<% include blocks/header %>
<style>
#mp1,#mp2,#mp3,
#mp4{
    margin-bottom: 12px;
    background-color: #000;
    height: auto;
    position: relative;
}
#videos_viewer_preview .plyr--video {
    height: inherit !important ;
}
.plyr--video {
    background: #000;
    overflow: hidden;
    height: 74% !important;
    margin: 0 auto;
}
.frmCtrl{
    height: 9%;
    display: inline-table;
    top: 0;
}
</style>

<script>var $user = <%- JSON.stringify($user) %>;</script>
<script>var lang = <%- JSON.stringify(lang) %>;</script>

<link rel="stylesheet" href="<%-window.libURL%>libs/css/custom_style.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/fonts.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/custom/ZoomPlugin.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/custom/ptz_style.css">

<link rel="stylesheet" href="<%-window.libURL%>libs/css/roboto.css" type="text/css" />
<link rel="stylesheet" href="<%-window.libURL%>libs/css/material-design-iconic-font.min.css" type="text/css" />
<link rel="stylesheet" href="<%-window.libURL%>libs/css/pnotify.custom.min.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/vbox.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/daterangepicker.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/circles.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/accordion.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/bootstrap.min.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/font-awesome.min.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/fullcalendar.min.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/gridstack.min.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/gridstack-extra.min.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/bootstrap-table.min.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/custom/newFace.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/custom/progress.css">

<link rel="stylesheet" href="<%-window.libURL%>libs/css/custom/player.css">
<script src="<%-window.libURL%>libs/js/custom/plyr.js"></script>
<link rel="stylesheet" href="<%-window.libURL%>libs/css/custom/simTree.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/custom/depart.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/custom/jquery.artaraxtreeview.css">
<link rel="stylesheet" href="<%-window.libURL%>libs/css/custom/viewCameras.css">

<link rel="stylesheet" href="<%-window.libURL%>libs/css/main.dash2.old.css">
<% customAutoLoad.LibsCss.forEach(function(lib){ %>
    <link rel="stylesheet" href="<%-window.libURL%>libs/css/<%-lib%>">
<% }) %>
<style id="theme">
<% if(details.theme&&details.theme!==''){ %><%- include(__dirname+'/web/libs/themes/'+details.theme+'/style.css'); %><% } %>
</style>
<style id="custom_css">
<%= details.css %>
</style>
<style>
<% if(details.video_delete&&details.video_delete!==''){
    details.video_delete.forEach(function(v,n){ %>
        [mid="<%= v %>"] .permission_video_delete{display:inline-block}
<%
    })
}else{ %>
    th.permission_video_delete,td.permission_video_delete{display:table-cell}
<% } %>
</style>
<html lang="en">
  <body id="bdyClr">
  	<div class="v-align">
  		<div class="loader">
  			<aside class="loader__box loader--left">
  				<span class="loader__circle"></span>
  			</aside>
  			<aside class="loader__box loader--right">
  				<span class="loader__circle"></span>
  			</aside>
  		</div>
  		<span><%-lang['loading text']%>
  		</span>
  	</div>
  	<div id="rightSide">
  		<nav class="nav__cont">
  			<ul class="sub_nav">
  				<li class="nav__items permission_monitor_create hidden-xs-sample" mid="" ke="">
  					<i class="fa fa-plus fa-2x"></i>
  					<a monitor="edit"><%-lang['Add Monitor']%>
  					</a>
  				</li>
  				<li class="nav__items   permission_monitor_create" mid="" ke="" title="<%-lang['Power Video Viewer']%>" >
  					<i class="fa fa-bolt fa-2x"></i>
  					<a monitor="powerview"><%-lang['Power Video Viewer']%>
  					</a>
  				</li>
  				<li class="nav__items dropdown " >
  					<i class="fa fa-group fa-2x"></i>
  					<a href="javascript:;" class="dropdown-toggle info-number" data-toggle="dropdown" aria-expanded="true"><%-lang['auth_reports']%>
  					</a>
  					<ul id="users_online" class="dropdown-menu list-unstyled msg_list scrollable" role="menu"></ul>
  				</li>
  				<li class="nav__items dropdown hidden-xs permission_monitor_create" mid="" ke="">
  					<i class="fa fa-exclamation-triangle fa-2x"></i>
  					<a href="javascript:;" class="dropdown-toggle info-number" data-toggle="dropdown" aria-expanded="true"><%-lang['core_reports']%>
  					</a>
  					<ul id="logs" class="dropdown-menu list-unstyled msg_list scrollable" role="menu"></ul>
  				</li>
  			</ul>
  		</nav>
  		<div class="mon_view">
  			<li>
  				<a title="<%-lang['Monitor Groups']%>" id="group_list_button" class="mdl-js-button">&nbsp;
  					<i class="fa fa-video-camera"></i>&nbsp;
  				</a>
  				<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="group_list_button" id="group_list"></ul>
  			</li>
  		</div>
  	</div>
  	<div class="demo-layout demo-blog mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
  		<div class="demo-avatar-dropdown">
  			<button id="accbtn" style="color:#fff" class="mdl-button mdl-js-button mdl-js-ripple-effect">
  				<i class="fa fa-cog fa-2x" aria-hidden="true"></i>
  			</button>
  			<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect scroll_content" for="accbtn">
  				<li class="mdl-menu__item" data-toggle="modal" data-target="#multi_mon">
  					<div>
  						<i class="fa fa-clone"></i>
  						<div><%- lang['Monitors'] %>
  						</div>
  					</div>
  				</li>
  				<li class="mdl-menu__item" mid="" ke="">
  					<div class="flex" monitor="powerview">
  						<i class="fa fa-bolt"></i>
  						<div><%- lang['Power Viewer'] %>
  						</div>
  					</div>
  				</li>
  				<li class="mdl-menu__item" mid="" ke="">
  					<div class="flex" monitor="timelapse">
  						<i class="fa fa-angle-double-right"></i>
  						<div><%- lang['Time-lapse'] %>
  						</div>
  					</div>
  				</li>
  				<li class="mdl-menu__item" mid="" ke="">
  					<div class="flex" monitor="multivideo">
  						<i class="fa fa-window-restore"></i>
  						<div><%- lang['multivideo'] %>
  						</div>
  					</div>
  				</li>
  				<li style="display:block" class="mdl-menu__item" id="showAtlas">
  					<div class="flex">
  						<i class="fa fa-globe"></i>
  						<a class="atlasLink" href="#" target="_parent"><%- lang['atlas'] %>
  						</a>
  					</div>
  				</li>
  				<li style="display:none;" class="mdl-menu__item" >
  					<div class="flex">
  						<i class="fa fa-connectdevelop"></i>
  						<a class="atlasLink" href="http://172.16.4.253/tamping/" target="_blank"><%- lang['tamPing'] %>
  						</a>
  					</div>
  				</li>
  				<li class="mdl-menu__item permission_user_change" data-toggle="modal" data-target="#settings">
  					<div>
  						<i class="fa fa-gears"></i>
  						<div><%- lang.Settings %>
  						</div>
  					</div>
  				</li>
  				<li  class="mdl-menu__item" data-toggle="modal" data-target="#apis">
  					<div>
  						<i class="fa fa-code"></i>
  						<div><%- lang.API %>
  						</div>
  					</div>
  				</li><% if(!details.sub){ %>
  				<li class="mdl-menu__item" data-toggle="modal" data-target="#onvif_probe">
  					<div>
  						<i class="fa fa-rss"></i>
  						<div><%- lang.ONVIF %>
  						</div>
  					</div>
  				</li>
  				<li style="display:none;"  class="mdl-menu__item" data-toggle="modal" data-target="#probe">
  					<div>
  						<i class="fa fa-search"></i>
  						<div><%- lang.FFprobe %>
  						</div>
  					</div>
  				</li>
  				<li style="display:none;" class="mdl-menu__item" data-toggle="modal" data-target="#monitorStates">
  					<div>
  						<i class="fa fa-align-right"></i>
  						<div><%- lang['Monitor States'] %>
  						</div>
  					</div>
  				</li>
  				<li class="mdl-menu__item" data-toggle="modal" data-target="#schedules">
  					<div>
  						<i class="fa fa-clock-o"></i>
  						<div><%- lang['Schedules'] %>
  						</div>
  					</div>
  				</li>
  				<li style="display:none;"  class="mdl-menu__item" data-toggle="modal" data-target="#filters">
  					<div>
  						<i class="fa fa-filter"></i>
  						<div><%- lang.Filters %>
  						</div>
  					</div>
  				</li><% } %>
  				<li class="mdl-menu__item permission_view_logs" data-toggle="modal" data-target="#logs_modal">
  					<div>
  						<i class="fa fa-exclamation-triangle"></i>
  						<div><%- lang.Logs %>
  						</div>
  					</div>
  				</li>
  				<li class="mdl-menu__item" class_toggle="list-blocks" data-target="#left_menu">
  					<div>
  						<i class="fa fa-camera"></i>
  						<div><%- lang['List Toggle'] %>
  						</div>
  					</div>
  				</li>
  				<li style="display:none;" class="mdl-menu__item" class_toggle="list-blocks" data-target="#newView">
  					<div>
  						<i class="fa fa-align-left"></i>
  						<div><%- lang['text_view_listCam'] %>
  						</div>
  					</div>
  				</li>
  				<li style="display:none" class="mdl-menu__item shinobi-detector-motion shinobi-detector-opencv shinobi-detector_plug" class_toggle="hide_indifference" data-target="body" >
  					<div>
  						<i class="fa fa-bolt"></i>
  						<div><%- lang['Motion GUI'] %>
  						</div>
  					</div>
  				</li>
  				<li  class="mdl-menu__item" system="jpegToggle">
  					<div>
  						<i class="fa fa-file-image-o"></i>
  						<div><%- lang['JPEG Mode'] %>
  						</div>
  					</div>
  				</li>
  				<li class="mdl-menu__item" system="switch" switch="monitorMuteAudio" type="text">
  					<div>
  						<i class="fa fa-volume-down"></i>
  						<div><%- lang['Mute Audio'] %>
  						</div>
  					</div>
  				</li>
  				<li style="display:none;" class="mdl-menu__item" system="switch" switch="monitorOrder" type="text">
  					<div>
  						<i class="fa fa-sort"></i>
  						<div><%- lang['Order Streams'] %>
  						</div>
  					</div>
  				</li>
  				<li class="mdl-menu__item" system="switch" switch="notifyHide" type="text">
  					<div>
  						<i class="fa fa-exclamation-circle"></i>
  						<div><%- lang['Hide Notes'] %>
  						</div>
  					</div>
  				</li>
  				<li style="display:none;" class="mdl-menu__item" data-toggle="modal" data-target="#about_window">
  					<div>
  						<i class="fa fa-bullseye"></i>
  						<div><%- lang['about_label_txt'] %>
  						</div>
  					</div>
  				</li>
  				<li class="mdl-menu__item logout">
  					<div>
  						<i class="fa fa-sign-out"></i>
  						<div><%- lang.Logout %>
  						</div>
  					</div>
  				</li>
  			</ul>
  			<div class="mdl-layout-spacer"></div>
  		</div>
  		<header id="main_header" class="demo-header mdl-layout__header">
  			<div class="mdl-layout__header-row top-container">
  				<div class="clock-container">
  					<div id="clock" class_toggle="twentyfour" data-target="#time-hours">
  						<div id="tamClock"></div>
  						<ul>
  							<li id="time-hours"></li>
  							<li class="point">:</li>
  							<li id="time-min"></li>
  							<li class="point">:</li>
  							<li id="time-sec"></li>
  						</ul>
  					</div>
  				</div>
  				<div class="os_bars hidden-xs">
  					<div class="display-table progress-container">
  						<div id="cpuUsage" class="bar-main-container azure">
  							<label>
  								<span class="os_cpuCount"></span><%-lang.CPU%>
  								<span class="os_cpuCount_trailer"></span><%-lang.on%>
  								<span class="os_platform" style="text-transform:capitalize"></span>
  							</label>
  							<div class="wrap">
  								<div class="bar-percentage" ></div>
  								<div class="bar-container">
  									<div class="bar"></div>
  								</div>
  								<div class="bar-icon" >
  									<img src="./libs/img/icon/cpuNew.png">
  									</div>
  								</div>
  							</div>
  							<div id="ramUsage" class="bar-main-container azure">
  								<label>
  									<span class="os_totalmem" style="letter-spacing:2px;font-weight:100"></span><%-lang.MB%><%-lang.RAM%>
  								</label>
  								<div class="wrap">
  									<div class="bar-percentage"></div>
  									<div class="bar-container">
  										<div class="bar"></div>
  									</div>
  									<div class="bar-icon" >
  										<img src="./libs/img/icon/ramNew.png">
  										</div>
  									</div>
  								</div>
  								<div id="diskUsage" class="bar-main-container azure">
  									<label>
  										<span class="value" style="letter-spacing:2px;font-weight:100"></span>
  									</label>
  									<div class="wrap">
  										<div class="bar-percentage" ></div>
  										<div class="bar-container">
  											<div class="bar"></div>
  										</div>
  										<div class="bar-icon" >
  											<img src="./libs/img/icon/storage.png">
  											</div>
  										</div>
  									</div>
  								</div>
  								<div class="mdl-layout-spacer"></div>
  							</div>
  							<ul class="nav navbar-nav ">
  								<li class="logout" >
  									<a style="font-size: 1.2em;" title="" id="group_list_button" class="mdl-js-button" data-upgraded=",MaterialButton">&nbsp;
  										<i class="fa fa-power-off"></i>&nbsp;
  									</a>
  								</li>
  								<img class="icon_user" src="libs/img/icon/user.png" />
  								<span class="usermail"></span>
  							</ul>
  						</header>
  						<div class="sidmenuLeft">
  							<div >
  								<i class="fa fa-angle-double-right"></i>
  							</div>
  						</div>
  						<div class="demo-drawer mdl-layout__drawer">
  							<nav class="demo-navigation mdl-navigation side-menu " id="left_menu">
                                <ul class="menuView">
                                        <li>
                                            <a class="btn-view" id="ViewCamGraphical">
                                                <i class="fa fa-navicon"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="btn-view" id="viewGrid">
                                                <i class="fa fa-dot-circle-o"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="btn-view" id="ViewBox">
                                                <i class="fa fa-th"></i>
                                            </a>
                                        </li>
                                    </ul>
  								<div class="toggle-button">
  									<i class="fa fa-angle-double-left"></i>
  								</div>
  								<div id="monitors_list" class="display-table"></div>
  								<div class="mdl-layout-spacer"></div>
  								<div class="bottomNavSid">
  									<div class="groupTam ">
  										<input type="text" autocomplete="off" id="monitors_list_search" required="required"/>
  										<span class="highlight"></span>
  										<span class="bar"></span>
  										<label><%-lang['Search txt']%>
  											<i class="fa fa-search" aria-hidden="true"></i>
  										</label>
  									</div>
  									<div id="myBtnContainer" ></div>
  								</div>
  							</nav>
  						</div>
  						<main class="mdl-layout__content selected" id="main_canvas">
  							<div class="embed-responsive  hidAtlas" id="viewAtlas" style="height:95vh">
  								<div id="containerB">
  									<button id="CloseIfram" type="button" class="btn btnExitIfram">
  										<i class="fa fa-sign-out"></i> خروج
  									</button>
  								</div>
  								<iframe class="embed-responsive-item" src="http://172.16.4.254/atlas/#/" allowfullscreen></iframe>
  							</div>
  							<div class="grid-stack" id="monitors_live"></div>
  						</main>
  					</div>
  				</body>
</html>
<!---->
<div class="hidden" id="temp"></div>
<canvas id="MyScreenShot" width="160" height="120"></canvas>

<% include blocks/multimon.ejs %>
<% include blocks/api.ejs %>
<% include blocks/about.ejs %>
<% include blocks/logs.ejs %>
<% include blocks/settings.ejs %>
<% include blocks/filters.ejs %>
<% include blocks/powervideo.ejs %>
<% include blocks/timelapse.ejs %>
<% include blocks/multivideo.ejs %>
<% include blocks/videoview.ejs %>
<% include blocks/monitoredit.ejs %>
<% include blocks/probe.ejs %>
<% include blocks/region.ejs %>
<% include blocks/detectorfilters.ejs %>
<% include blocks/monitorStates.ejs %>
<% include blocks/schedules.ejs %>
<% include blocks/confirm.ejs %>
<% customAutoLoad.PageBlocks.forEach(function(block){ %>
    <%- include(block) %>
<% }) %>
<% if(config.DropboxAppKey){ %>
<!--Dropbox Library, Change data-app-key to your app key. -->
<script type="text/javascript" src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="<%= config.DropboxAppKey %>"></script>
<!--Dropbox End-->
<% } %>
<script src="<%-window.libURL%>libs/js/material.min.js"></script>
<script src="<%-window.libURL%>libs/js/pnotify.custom.min.js"></script>

<script src="<%-window.libURL%>libs/js/custom/moment.min.js"></script>
<script src="<%-window.libURL%>libs/js/custom/moment-jalaali.js"></script>
<script src="<%-window.libURL%>libs/js/custom/daterangepicker-fa.js"></script>
<script src="<%-window.libURL%>libs/js/daterangepicker.js"></script>
<script src="<%-window.libURL%>libs/js/custom/daterangepicker-fa-ex.js"></script>
<script><% include ../libs/js/livestamp.min.js %></script>
<script src="<%-window.libURL%>libs/js/placeholder.js"></script>
<script src="<%-window.libURL%>libs/js/bootstrap.min.js"></script>
<script src="<%-window.libURL%>libs/js/bootstrap-table.min.js"></script>
<script src="<%-window.libURL%>libs/js/socket.io.js"></script>
<!-- <script src="<%-window.libURL%>libs/js/fullcalendar.min.js"></script> -->
<script src="<%-window.libURL%>libs/js/hls.min.js"></script>
<script src="<%-window.libURL%>libs/js/libde265.min.js"></script>
<script type="text/javascript" src="<%-window.libURL%>libs/js/flv.shinobi.js">;</script>
<script src="<%-window.libURL%>libs/js/menu.js"></script>
<script src="<%-window.libURL%>libs/js/clock.js"></script>
<script src="<%-window.libURL%>libs/js/poseidon.js"></script>
<script src="<%-window.libURL%>libs/js/Chart.js"></script>
<script src="<%-window.libURL%>libs/js/clusterPoints.js"></script>

<script src="<%-window.libURL%>libs/js/jquery.canvasAreaDraw.js"></script>
<script src="<%-window.libURL%>libs/js/jquery-ui.min.js"></script>
<!--<script src="<%-window.libURL%>libs/js/jquery.ui.touch.js"></script>-->
<script src="<%-window.libURL%>libs/js/lodash.min.js"></script>
<script src="<%-window.libURL%>libs/js/gridstack.min.js"></script>
<script src="<%-window.libURL%>libs/js/gridstack.jQueryUI.min.js"></script>
<script src="<%-window.libURL%>libs/js/basic.js"></script>
<script><% include ../libs/js/dash2.config.js %></script>
<script src="<%-window.libURL%>libs/js/dash2.basic.js"></script>
<script src="<%-window.libURL%>libs/js/dash2.confirm.js"></script>
<script src="<%-window.libURL%>libs/js/dash2.socketio.js"></script>
<script src="<%-window.libURL%>libs/js/dash2.gridstack.js"></script>
<script src="<%-window.libURL%>libs/js/dash2.elements.js"></script>
<script src="<%-window.libURL%>libs/js/dash2.elementbuilder.js"></script>
<script src="<%-window.libURL%>libs/js/dash2.init.js"></script>

<script src="<%-window.libURL%>libs/js/custom/fullcalendar.js"></script>

<script src="<%-window.libURL%>libs/js/custom/simTree.js"></script>
<script src="<%-window.libURL%>libs/js/custom/jquery.artaraxtreeview.js"></script>
<script src="<%-window.libURL%>libs/js/custom/sorttable.js"></script>
<% customAutoLoad.LibsJs.forEach(function(lib){ %>
    <script src="<%-window.libURL%>libs/js/<%-lib%>"></script>
<% }) %>
<% include blocks/help.ejs %>
<script src="<%-window.libURL%>libs/js/custom/ResizeSensor.js"></script>
<script src="<%-window.libURL%>libs/js/custom/ElementQueries.js"></script>